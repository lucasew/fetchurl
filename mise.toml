[tools]
go = "1.24"
"go:golang.org/x/tools/gopls" = "latest"
golangci-lint = "latest"
actionlint = "latest"
node = "lts"
sqlc = "latest"

[tasks."lint:go"]
run = "golangci-lint run ./..."
description = "Lint Go code"

[tasks."lint:md"]
run = "npx markdownlint-cli2 \"**/*.md\" \"#node_modules\""
description = "Lint Markdown files"

[tasks."lint:action"]
run = "actionlint"
description = "Lint GitHub Actions workflows"

[tasks.lint]
depends = ["lint:*"]
description = "Run all linters"

[tasks."fmt:go"]
run = "go fmt ./..."
description = "Format Go code"

[tasks.fmt]
depends = ["fmt:*"]
description = "Format all code"

[tasks."test:go"]
run = "go test -v ./..."
description = "Run Go tests"

[tasks.test]
depends = ["test:*"]
description = "Run all tests"

[tasks.build]
run = "go build -o fetchurl ./cmd/fetchurl"
description = "Build the binary"

[tasks."install:go"]
run = "go mod download"
description = "Install Go dependencies"

[tasks.install]
depends = ["install:*"]
description = "Install all dependencies"

[tasks."codegen:sqlc"]
run = "sqlc generate"
description = "Generate SQLC code"

[tasks.codegen]
depends = ["codegen:*"]
description = "Run all codegen tasks"

[tasks.ci]
depends = ["lint", "test", "build"]
description = "Run CI pipeline"
