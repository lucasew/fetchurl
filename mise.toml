[tools]
go = "1.25.6"
"go:golang.org/x/tools/gopls" = "0.21.0"
golangci-lint = "1.64.6"
actionlint = "1.7.7"
node = "22.13.0"
"github:sqlc-dev/sqlc" = "1.28.0"
yamllint = "1.35.1"
hadolint = "2.12.0"

[tasks."lint:go"]
run = "golangci-lint run ./..."
description = "Lint Go code"

[tasks."lint:md"]
run = "npx markdownlint-cli2 \"**/*.md\" \"#node_modules\""
description = "Lint Markdown files"

[tasks."lint:yaml"]
run = "yamllint ."
description = "Lint YAML files"

[tasks."lint:action"]
run = "actionlint"
description = "Lint GitHub Actions"

[tasks."lint:docker"]
run = "hadolint Dockerfile"
description = "Lint Dockerfile"

[tasks.lint]
depends = ["lint:*"]
description = "Run all linters"

[tasks."fmt:go"]
run = "go fmt ./..."
description = "Format Go code"

[tasks.fmt]
depends = ["fmt:*"]
description = "Format all code"

[tasks.test]
run = "go test -v ./..."
description = "Run tests"

[tasks.build]
run = "go build -o dist/fetchurl ./cmd/fetchurl"
description = "Build binary"

[tasks.ci]
depends = ["lint", "test"]
description = "Run CI pipeline"

[tasks]
codegen = "sqlc generate"
install = "go mod download"
